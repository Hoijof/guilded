(this.webpackJsonpguilded=this.webpackJsonpguilded||[]).push([[0],{143:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var c=a(6),n=a(0),r=a.n(n),s=a(28),i=a.n(s),l=(a(143),a(144),a(97)),d=a(137),o=a(228),u=a(226),j=a(60);function b(e){return e.ticker}function h(e){var t=b(e);if(t.currentStage===v.NIGHT)return O(e);t.currentStage=function(e){switch(e){case v.MORNING:return v.AFTERNOON;case v.AFTERNOON:return v.EVENING;case v.EVENING:return v.NIGHT}}(t.currentStage)}function O(e){var t=b(e);t.currentStage=v.MORNING,t.day++}function g(e){var t;return t={},Object(j.a)(t,v.MORNING,[]),Object(j.a)(t,v.AFTERNOON,[]),Object(j.a)(t,v.EVENING,[]),Object(j.a)(t,v.NIGHT,[]),t}var v={MORNING:"Morning",AFTERNOON:"Afternoon",EVENING:"Evening",NIGHT:"Night"},f={initialize:function(){return{currentStage:v.MORNING,day:1,todayEvents:g({}),activeEvents:[],stats:{totalEvents:0},callADay:O,advanceStage:h}}};var p=a(134),m=a(15);function x(e,t){var a,c,n="string"===typeof t?{type:t}:t;switch(["increaseStageProgress","resetStageProgress"].includes(n.type)||console.log(n),n.type){case"changeSelectedMenu":return Object(m.a)(Object(m.a)({},e),{},{selectedItem:n.payload});case"increaseStageProgress":return Object(m.a)(Object(m.a)({},e),{},{stageProgress:e.stageProgress+e.stageSpeed});case"resetStageProgress":return Object(m.a)(Object(m.a)({},e),{},{stageProgress:0});case"switchPause":return Object(m.a)(Object(m.a)({},e),{},{isPaused:!e.isPaused});case"changeStageSpeed":return Object(m.a)(Object(m.a)({},e),{},{stageSpeed:e.stageSpeed+n.payload})}switch(n.type){case"changeSelectedGuildMenu":return Object(m.a)(Object(m.a)({},e),{},{guild:Object(m.a)(Object(m.a)({},e.guild),{},{selectedItem:n.payload})});case"askFounding":return Object(m.a)(Object(m.a)({},e),{},{guild:Object(m.a)(Object(m.a)({},e.guild),{},{stats:Object(m.a)(Object(m.a)({},e.guild.stats),{},{gold:25})})});case"addGoldToMember":return Object(m.a)(Object(m.a)({},e),{},{guild:Object(m.a)(Object(m.a)({},e.guild),{},{stats:Object(m.a)(Object(m.a)({},e.guild.stats),{},{members:(a=e.guild.stats.members,c=function(e){e.id===n.payload.id&&(e.gold+=5)},a.map((function(e){var t=Object(m.a)(Object(m.a)({},e),{},{stats:Object(m.a)({},e.stats),computedStats:Object(m.a)({},e.computedStats)});return c(t),t}))),gold:e.guild.stats.gold-5})})});case"hireGuildMember":return Object(m.a)(Object(m.a)({},e),{},{guild:Object(m.a)(Object(m.a)({},e.guild),{},{stats:Object(m.a)(Object(m.a)({},e.guild.stats),{},{members:[].concat(Object(p.a)(e.guild.stats.members),[n.payload]),gold:e.guild.stats.gold-5*n.payload.level})}),tavern:Object(m.a)(Object(m.a)({},e.tavern),{},{recruits:e.tavern.recruits.filter((function(e){return e.id!==n.payload.id}))})})}switch(n.type){case"changeSelectedCityMenu":return Object(m.a)(Object(m.a)({},e),{},{city:Object(m.a)(Object(m.a)({},e.city),{},{selectedItem:n.payload})})}return console.log("returning Default"),e}var y=a(222),S=a(229);function w(e){var t=e.dispatch;return Object(c.jsxs)(S.a,{onSelect:function(e){var a=e.key;t({type:"changeSelectedCityMenu",payload:a})},theme:"light",mode:"inline",defaultSelectedKeys:["Overview"],children:[Object(c.jsx)(S.a.Item,{children:"Overview"},"Overview"),Object(c.jsx)(S.a.Item,{children:"Guild"},"Guild"),Object(c.jsx)(S.a.Item,{children:"Market"},"Market"),Object(c.jsx)(S.a.Item,{children:"Tavern"},"Tavern")]})}function k(e){e.dispatch,e.state;return"overview"}function N(e){var t=e.dispatch;return Object(c.jsxs)(S.a,{onSelect:function(e){var a=e.key;t({type:"changeSelectedGuildMenu",payload:a})},theme:"light",mode:"horizontal",defaultSelectedKeys:["Overview"],children:[Object(c.jsx)(S.a.Item,{children:"Overview"},"Overview"),Object(c.jsx)(S.a.Item,{children:"Members"},"Members")]})}var I=a(219),M=a(224);function T(e){var t=[{name:"name",value:e.name},{name:"gold",value:e.gold},{name:"members",value:e.members.length}];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(I.a,{orientation:"left",children:"Stats"}),Object(c.jsx)(M.b,{size:"small",bordered:!0,dataSource:t,renderItem:function(e){return Object(c.jsxs)(M.b.Item,{children:[e.name,": ",e.value]})}})]})}function G(e){var t=e.dispatch,a=e.state,n=a.guild.stats,r=n.gold,s=n.members;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(T,Object(m.a)({},a.guild.stats)),Object(c.jsx)("br",{}),0===r&&1===s.length?Object(c.jsx)(o.a,{type:"primary",onClick:function(){t({type:"askFounding"})},children:"Ask for founding to the city council"}):null]})}var P=a(225),E=a(227),C=a(223),F=a(230);function R(e,t){return t>e?"success":t<e?"danger":"default"}function A(e){return Object.keys(e.stats).map((function(t){var a=e.stats[t],n=e.computedStats[t];return Object(c.jsxs)(P.a.Text,{type:R(a,n),children:[t,": ",n]},t)}))}function L(e){return Object.keys(e.stats).reduce((function(t,a){return t+e.stats[a]}),0)-e.stats.health}function H(e){return Object.keys(e.data).map((function(t){var a=e.data[t];return Object(c.jsxs)(P.a.Text,{children:[t,": ",a]},t)}))}var z={width:200,float:"left",margin:5},D=P.a.Text,V=E.a.Panel;function B(e){var t=e.dispatch,a=e.state;return Object(c.jsx)(c.Fragment,{children:a.guild.stats.members.map((function(e,a){return Object(c.jsx)(C.a,{style:z,title:e.name,extra:Object(c.jsx)("div",{style:{width:15,height:15,background:e.color}}),children:Object(c.jsxs)(F.b,{style:{width:"100%"},direction:"vertical",children:[Object(c.jsxs)(D,{children:["Gold: ",e.gold," ",Object(c.jsx)(D,{style:{fontSize:18,cursor:"pointer"},onClick:function(){t({type:"addGoldToMember",payload:e})},children:"+"})]}),Object(c.jsxs)(D,{children:["Level: ",e.level," (",e.exp," / ",2*e.level,") ",e.exp>2*e.level?"\u25b2":null]}),Object(c.jsxs)(D,{children:["Type: ",e.type]}),Object(c.jsxs)(D,{children:["Task: ",e.task?e.task:"None"]}),Object(c.jsx)(E.a,{ghost:!0,style:{marginLeft:-15},children:Object(c.jsx)(V,{header:"Stats (".concat(L(e),")"),children:Object(c.jsx)(F.b,{style:{width:"100%"},direction:"vertical",children:A(e)})},"1")}),Object(c.jsx)(E.a,{ghost:!0,style:{marginLeft:-15},children:Object(c.jsx)(V,{header:"Data",children:Object(c.jsx)(F.b,{style:{width:"100%"},direction:"vertical",children:H(e)})},"2")})]})},a)}))})}var J=y.a.Header,K=y.a.Content;function W(e,t){switch(t.guild.selectedItem){case"Overview":return Object(c.jsx)(G,{dispatch:e,state:t});case"Members":return Object(c.jsx)(B,{dispatch:e,state:t});case"Market":return Object(c.jsx)(G,{dispatch:e,state:t});default:return"error"}}function Y(e){var t=e.dispatch,a=e.state;return Object(c.jsxs)(y.a,{style:{background:"white"},children:[Object(c.jsx)(J,{theme:"light",style:{background:"white",padding:0},children:Object(c.jsx)(N,{dispatch:t})}),Object(c.jsx)(K,{style:{background:"white",padding:10,margin:"24px 16px 0",overflow:"initial"},children:W(t,a)})]})}function q(){return"hola"}var Q=P.a.Title,U=P.a.Text,X=E.a.Panel;function Z(e){var t=e.dispatch,a=e.state;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(U,{children:"Welcome to the Tavern, please take a seat!"}),Object(c.jsx)(Q,{level:4,children:"Available Recruits"}),a.tavern.recruits.map((function(e,n){var r=5*e.level,s=a.guild.stats.gold>=r;return Object(c.jsx)(C.a,{style:z,title:e.name,extra:Object(c.jsx)("div",{style:{width:15,height:15,background:e.color}}),children:Object(c.jsxs)(F.b,{style:{width:"100%"},direction:"vertical",children:[Object(c.jsxs)(U,{children:["Level: ",e.level," (",e.exp," / ",2*e.level,") ",e.exp>2*e.level?"\u25b2":null]}),Object(c.jsxs)(U,{children:["Type: ",e.type]}),Object(c.jsx)(E.a,{ghost:!0,style:{marginLeft:-15},children:Object(c.jsx)(X,{header:"Stats (".concat(L(e),")"),children:Object(c.jsx)(F.b,{style:{width:"100%"},direction:"vertical",children:A(e)})},"1")}),Object(c.jsxs)(o.a,{type:"primary",disabled:!s,onClick:function(){t({type:"hireGuildMember",payload:e}),a.notify.info({message:"You just hired ".concat(e.name," for ").concat(r," gold coins")})},children:["Hire for ",r," gold coins"]})]})},n)}))]})}var $=y.a.Sider,_=y.a.Content;function ee(e){var t=e.dispatch,a=e.state;a.city;return Object(c.jsxs)(y.a,{children:[Object(c.jsx)($,{theme:"light",style:{overflow:"auto",height:"100vh",position:"fixed",left:0},children:Object(c.jsx)(w,{dispatch:t})}),Object(c.jsx)(y.a,{style:{marginLeft:200,height:"100vh"},children:Object(c.jsx)(_,{style:{background:"white",padding:10,margin:"24px 16px 0",overflow:"initial"},children:te(t,a)})})]})}function te(e,t){switch(t.city.selectedItem){case"Overview":return Object(c.jsx)(k,{dispatch:e,state:t});case"Guild":return Object(c.jsx)(Y,{dispatch:e,state:t});case"Market":return Object(c.jsx)(q,{dispatch:e,state:t});case"Tavern":return Object(c.jsx)(Z,{dispatch:e,state:t});default:return"No content"}}function ae(e,t){return Math.round(Math.random()*(t-e)+e)}function ce(){return"#".concat(Math.floor(16777215*Math.random()).toString(16))}var ne=0;function re(){return Math.random()>.5?"warrior":"mage"}function se(){return{health:ae(8,10),strength:ae(1,3),willpower:ae(1,3),endurance:ae(1,3),agility:ae(1,3)}}function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"name",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:re(),c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:se(),n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{missions:0,daysInGuild:0};return{id:ne++,name:e,color:t,items:[],gold:0,exp:0,level:1,type:a,task:null,stats:c,computedStats:c,data:n}}function le(){var e=d.a.useNotification(),t=Object(l.a)(e,2),a=t[0],r=t[1],s=Object(n.useReducer)(x,{guild:{stats:{name:"Tainor",gold:0,members:[ie("Hoijof","indigo")],items:[]},selectedItem:"Overview"},city:{selectedItem:"Overview"},tavern:{recruits:[1,2,3,4,5,6,7,8,9,10].map((function(){return ie()}))},selectedCity:"City",day:0,stageSpeed:5,stageProgress:0,isPaused:!1,notify:a,ticker:f.initialize()}),i=Object(l.a)(s,2),j=i[0],b=i[1];return function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){if(!j.isPaused)return j.stageProgress<100?b({type:"increaseStageProgress"}):(j.ticker.advanceStage(j),b({type:"resetStageProgress"}))}),100),Object(c.jsxs)(c.Fragment,{children:[r,de(b,j),Object(c.jsxs)("div",{style:{position:"absolute",left:0,bottom:0,width:"100%"},children:[Object(c.jsxs)("div",{children:[" Day: ",j.ticker.day]}),Object(c.jsxs)("div",{children:["Time of The Day: ",j.ticker.currentStage]}),Object(c.jsx)(o.a,{onClick:function(){b("switchPause")},children:j.isPaused?"Resume":"Pause"}),Object(c.jsx)("br",{}),Object(c.jsx)(o.a,{onClick:function(){b({type:"changeStageSpeed",payload:-1})},children:"-"}),Object(c.jsxs)("span",{children:[" Speed: ",j.stageSpeed," "]}),Object(c.jsx)(o.a,{onClick:function(){b({type:"changeStageSpeed",payload:1})},children:"+"}),Object(c.jsx)(u.a,{percent:j.stageProgress,showInfo:!1,size:"small"})]})]})}function de(e,t){switch(t.selectedCity){case"City":return Object(c.jsx)(ee,{dispatch:e,state:t});default:return"No city to render"}}var oe=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(le,{})})},ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,231)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(oe,{})}),document.getElementById("root")),ue()}},[[217,1,2]]]);
//# sourceMappingURL=main.6ec42ba4.chunk.js.map