(this.webpackJsonpguilded=this.webpackJsonpguilded||[]).push([[0],{142:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);var r=n(5),s=n(0),a=n(27),c=n.n(a),i=(n(142),n(143),n(95)),o=n(135),d=n(226),l=n(224),u=n(89);function h(e){return e.ticker}function j(e){return e.guild.selectedItem}function g(e){return h(e).activeEvents}function f(e,t,n,r,s,a,c){return{start:e,end:t,name:n,description:r,type:s,startHandler:a,endHandler:c}}var p,v="QUEST",b="EVENT";function y(e){var t=h(e);t.todayEvents=t.events.filter((function(e){return m(t,e.start)||m(t,e.end)}))}function m(e,t){return e.year===t[0]&&e.month===t[1]&&e.day===t[2]}function O(e,t){return w(S(e)+t)}function x(e){return[e.year,e.month,e.day,e.hour]}function S(e){return 1440*e[0]+360*e[1]+24*(e[2]-1)+e[3]}function w(e){return[Math.floor(e/1440),Math.floor(e/360%4),Math.floor(e/24%15)+1,e%24]}function k(e,t,n){return f(t,n,e.name,e.description,e.type,e.startHandler,e.endHandler)}function I(e,t){var n=h(t);if(n.currentStage===E.NIGHT)return N(e,t);n.currentStage=function(e){switch(e){case E.MORNING:return E.AFTERNOON;case E.AFTERNOON:return E.EVENING;case E.EVENING:return E.NIGHT}}(n.currentStage)}function N(e,t){var n=h(t);n.currentStage=E.MORNING,n.hour=0,n.day++,n.day>15&&function(e,t){var n=h(t);n.day=1,n.month++,4===n.month&&function(e,t){var n=h(t);n.month=0,n.year++}(0,t)}(0,t),y(t)}function T(e,t){t.isPaused||(h(t).stats.ticks++,h(t).hour++,e("increaseStageProgress"),5===t.stageProgress&&(t.ticker.advanceStage(e,t),e("resetStageProgress")),function(e,t){var n=h(t);n.todayEvents.filter((function(e){return e.start[3]===n.hour||e.end[3]===n.hour})).forEach((function(r){m(n,r.start)&&r.start[3]===n.hour?(r.startHandler(e,t,r),n.activeEvents.push(r)):(r.endHandler(e,t,r),n.events.splice(n.events.indexOf(r),1),n.activeEvents.splice(n.activeEvents.indexOf(r),1))}))}(e,t))}var E={MORNING:"Morning",AFTERNOON:"Afternoon",EVENING:"Evening",NIGHT:"Night"};var M=["Decembary","Aprimay","Jugust","Septober"],G={initialize:function(e){p={currentStage:E.MORNING,hour:0,day:1,month:0,year:475,todayEvents:[],activeEvents:[],events:[],stats:{totalEvents:0,ticks:0},callADay:N,advanceStage:I,tick:T};var t=f([475,0,5,8],[475,0,6,0],"Fifth of Decembrary","A very beautiful festivity",b,(function(e,t,n){console.log("It's ".concat(n.name,"  !!"))}),(function(e,t,n){var r=h(t);r.events.push(k(n,[r.year+1,0,5,8],[r.year+1,0,6,0]))})),n=f([475,0,1,8],[475,0,8,8],"First Week of the year!","The very first week of the year",b,(function(e,t,n){console.log("It's ".concat(n.name,"  !!"))}),(function(e,t,n){var r=h(t);r.events.push(k(n,[r.year+1,0,1,8],[r.year+1,0,8,1]))}));return p.events.push(t,n),y({ticker:p}),p}};var P=n(38),q=n.n(P);function C(e,t){return Math.round(Math.random()*(t-e)+e)}function F(){return"#".concat(Math.floor(16777215*Math.random()).toString(16))}var $=0;function H(){var e={id:++$,name:"No name",description:"No Description",steps:[],reward:0,questValue:0,active:!1,completed:!1,assignee:null,log:[]},t=function(e){var t=C(2,8);return{name:"Go Fetch",description:"Go find something somewhere",reward:Math.floor(2*t+C(-3,4)),questValue:t,steps:[Q(e,t),A(e,L.GO_FETCH),Q(e,t)]}}(e),n=t.name,r=t.description,s=t.reward,a=t.steps;return e.name=n,e.description=r,e.reward=s,e.steps=a,e}function Q(e,t){return function(n){var r=x(h(n));return r[3]++,f(r,O(r,t),"Quest Traveling","None",v,(function(n,r,s){e.log.push("Going to travel for ".concat(t," hours."))}),(function(t,n,r){e.log.push("We arrived at our destination"),t({type:"advanceQuest",payload:e})}))}}function A(e,t){return function(t){var n=x(h(t));return n[3]++,f(n,O(n,3),"Executing Quest","None",v,(function(t,n,r){e.log.push("Started searching for the thing.")}),(function(t,n,r){e.log.push("Found the thing."),t({type:"advanceQuest",payload:e})}))}}function R(e,t){var n=t.steps[0](e),r=h(e);r.events.push(n),r.todayEvents.push(n)}var L={GO_FETCH:"Go Fetch"};function D(e,t){var n="string"===typeof t?{type:t}:t;switch(["increaseStageProgress","resetStageProgress"].includes(n.type)||console.log(n),n.type){case"changeSelectedMenu":return q()(e,{selectedItem:{$set:n.payload}});case"increaseStageProgress":return q()(e,{stageProgress:{$set:e.stageProgress+1}});case"resetStageProgress":return q()(e,{stageProgress:{$set:0}});case"switchPause":return q()(e,{isPaused:{$set:!e.isPaused}});case"changeStageSpeed":return q()(e,{stageSpeed:{$set:e.stageSpeed+n.payload}})}switch(n.type){case"changeSelectedGuildMenu":return q()(e,{guild:{selectedItem:{$set:n.payload}}});case"askFounding":return q()(e,{guild:{stats:{gold:{$set:25}}}});case"addGoldToMember":var r=e.guild.stats.members.indexOf(n.payload),s=q()(n.payload,{gold:{$set:n.payload.gold+5}});return q()(e,{guild:{stats:{members:{$splice:[[r,1,s]]},gold:{$set:e.guild.stats.gold-5}}}});case"hireGuildMember":return q()(e,{guild:{stats:{members:{$push:[n.payload]},gold:{$set:e.guild.stats.gold-5*n.payload.level}}},tavern:{recruits:{$splice:[[e.tavern.recruits.indexOf(n.payload),1]]}}})}switch(n.type){case"changeSelectedCityMenu":return q()(e,{city:{selectedItem:{$set:n.payload}}})}switch(n.type){case"addQuest":return q()(e,{quests:{quests:{$push:n.payload}}});case"removeQuest":return q()(e,{quests:{quests:{$splice:[[e.quests.quests.indexOf(n.payload),1]]}}});case"startQuest":return function(e,t){t.active||(t.active=!0,R(e,t))}(e,n.payload),q()(e,{quests:{quests:{$splice:[[e.quests.quests.indexOf(n.payload),1,n.payload]]}}});case"advanceQuest":return function(e,t){if(t.steps.shift(),0===t.steps.length)return function(e){e.completed=!0,e.active=!1,e.log.push("Quest finished")}(t);R(e,t)}(e,n.payload),q()(e,{quests:{quests:{$splice:[[e.quests.quests.indexOf(n.payload),1,n.payload]]}}})}return console.log("returning Default"),e}var z=n(220),V=n(227);function K(e){var t=e.dispatch;return Object(r.jsxs)(V.a,{className:"CityMenu",onSelect:function(e){var n=e.key;t({type:"changeSelectedCityMenu",payload:n})},theme:"light",mode:"inline",defaultSelectedKeys:["Overview"],children:[Object(r.jsx)(V.a.Item,{children:"Overview"},"Overview"),Object(r.jsx)(V.a.Item,{children:"Guild"},"Guild"),Object(r.jsx)(V.a.Item,{children:"Market"},"Market"),Object(r.jsx)(V.a.Item,{children:"Tavern"},"Tavern")]})}function B(e){e.dispatch;var t=e.state;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Overview"}),Object(r.jsx)("h3",{children:"Active Events"}),g(t).map((function(e){return Object(r.jsx)("div",{children:e.name},e.name)}))]})}function J(e){var t=e.dispatch,n=e.defaultItem;return Object(r.jsxs)(V.a,{onSelect:function(e){var n=e.key;t({type:"changeSelectedGuildMenu",payload:n})},theme:"light",mode:"horizontal",defaultSelectedKeys:[n],children:[Object(r.jsx)(V.a.Item,{children:"Overview"},"Overview"),Object(r.jsx)(V.a.Item,{children:"Members"},"Members")]})}var W=n(136),Y=n(217),_=n(222);function U(e){var t=[{name:"name",value:e.name},{name:"gold",value:e.gold},{name:"members",value:e.members.length}];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Y.a,{orientation:"left",children:"Stats"}),Object(r.jsx)(_.b,{size:"small",bordered:!0,dataSource:t,renderItem:function(e){return Object(r.jsxs)(_.b.Item,{children:[e.name,": ",e.value]})}})]})}function X(e){var t=e.dispatch,n=e.state,s=n.guild.stats,a=s.gold,c=s.members;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(U,Object(W.a)({},n.guild.stats)),Object(r.jsx)("br",{}),0===a&&1===c.length?Object(r.jsx)(d.a,{type:"primary",onClick:function(){t({type:"askFounding"})},children:"Ask for founding to the city council"}):null]})}var Z=n(223),ee=n(225),te=n(221),ne=n(228);function re(e,t){return t>e?"success":t<e?"danger":"default"}function se(e){return Object.keys(e.stats).map((function(t){var n=e.stats[t],s=e.computedStats[t];return Object(r.jsxs)(Z.a.Text,{type:re(n,s),children:[t,": ",s]},t)}))}function ae(e){return Object.keys(e.stats).reduce((function(t,n){return t+e.stats[n]}),0)-e.stats.health}function ce(e){return Object.keys(e.data).map((function(t){var n=e.data[t];return Object(r.jsxs)(Z.a.Text,{children:[t,": ",n]},t)}))}var ie={width:200,float:"left",margin:5},oe=Z.a.Text,de=ee.a.Panel;function le(e){var t=e.dispatch,n=e.state;return Object(r.jsx)(r.Fragment,{children:n.guild.stats.members.map((function(e,n){return Object(r.jsx)(te.a,{style:ie,title:e.name,extra:Object(r.jsx)("div",{style:{width:15,height:15,background:e.color}}),children:Object(r.jsxs)(ne.b,{style:{width:"100%"},direction:"vertical",children:[Object(r.jsxs)(oe,{children:["Gold: ",e.gold," ",Object(r.jsx)(oe,{style:{fontSize:18,cursor:"pointer"},onClick:function(){t({type:"addGoldToMember",payload:e})},children:"+"})]}),Object(r.jsxs)(oe,{children:["Level: ",e.level," (",e.exp," / ",2*e.level,") ",e.exp>2*e.level?"\u25b2":null]}),Object(r.jsxs)(oe,{children:["Type: ",e.type]}),Object(r.jsxs)(oe,{children:["Task: ",e.task?e.task:"None"]}),Object(r.jsx)(ee.a,{ghost:!0,style:{marginLeft:-15},children:Object(r.jsx)(de,{header:"Stats (".concat(ae(e),")"),children:Object(r.jsx)(ne.b,{style:{width:"100%"},direction:"vertical",children:se(e)})},"1")}),Object(r.jsx)(ee.a,{ghost:!0,style:{marginLeft:-15},children:Object(r.jsx)(de,{header:"Data",children:Object(r.jsx)(ne.b,{style:{width:"100%"},direction:"vertical",children:ce(e)})},"2")})]})},n)}))})}var ue=z.a.Header,he=z.a.Content;function je(e,t){switch(t.guild.selectedItem){case"Overview":return Object(r.jsx)(X,{dispatch:e,state:t});case"Members":return Object(r.jsx)(le,{dispatch:e,state:t});case"Market":return Object(r.jsx)(X,{dispatch:e,state:t});default:return"error"}}function ge(e){var t=e.dispatch,n=e.state;return Object(r.jsxs)(z.a,{style:{background:"white"},children:[Object(r.jsx)(ue,{theme:"light",style:{background:"white",padding:0},children:Object(r.jsx)(J,{dispatch:t,defaultItem:j(n)})}),Object(r.jsx)(he,{style:{background:"white",padding:10,margin:"24px 16px 0",overflow:"initial"},children:je(t,n)})]})}function fe(){return"hola"}var pe=Z.a.Title,ve=Z.a.Text,be=ee.a.Panel;function ye(e){var t=e.dispatch,n=e.state;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ve,{children:"Welcome to the Tavern, please take a seat!"}),Object(r.jsxs)(ee.a,{ghost:!0,style:{marginLeft:-15},defaultActiveKey:["2"],children:[Object(r.jsxs)(be,{header:"Recruits",children:[Object(r.jsx)(pe,{level:4,children:"Available Recruits"}),n.tavern.recruits.map((function(e,s){var a=5*e.level,c=n.guild.stats.gold>=a;return Object(r.jsx)(te.a,{style:ie,title:e.name,extra:Object(r.jsx)("div",{style:{width:15,height:15,background:e.color}}),children:Object(r.jsxs)(ne.b,{style:{width:"100%"},direction:"vertical",children:[Object(r.jsxs)(ve,{children:["Level: ",e.level," (",e.exp," / ",2*e.level,") ",e.exp>2*e.level?"\u25b2":null]}),Object(r.jsxs)(ve,{children:["Type: ",e.type]}),Object(r.jsx)(ee.a,{ghost:!0,style:{marginLeft:-15},children:Object(r.jsx)(be,{header:"Stats (".concat(ae(e),")"),children:Object(r.jsx)(ne.b,{style:{width:"100%"},direction:"vertical",children:se(e)})},"1")}),Object(r.jsxs)(d.a,{type:"primary",disabled:!c,onClick:function(){t({type:"hireGuildMember",payload:e}),n.notify.info({message:"You just hired ".concat(e.name," for ").concat(a," gold coins")})},children:["Hire for ",a," gold coins"]})]})},s)}))]},"1"),Object(r.jsx)(be,{header:"Quests",children:n.quests.quests.map((function(e,s){return Object(r.jsx)(te.a,{style:ie,title:e.name,children:Object(r.jsxs)(ne.b,{style:{width:"100%"},direction:"vertical",children:[Object(r.jsxs)(ve,{children:["name: ",e.name]}),Object(r.jsxs)(ve,{children:["description: ",e.description]}),Object(r.jsxs)(ve,{children:["reward: ",e.reward]}),Object(r.jsx)(ee.a,{ghost:!0,style:{marginLeft:-15},children:Object(r.jsx)(be,{header:"Quest Log ".concat(e.log.length),children:Object(r.jsx)(ne.b,{style:{width:"100%"},direction:"vertical",children:e.log.map((function(e){return Object(r.jsx)("div",{children:e},e)}))})},"1")}),Object(r.jsx)(d.a,{type:"primary",onClick:function(){t({type:"startQuest",payload:e}),n.notify.info({message:"You just started ".concat(e.name)})},children:"Start quest"})]})},s)}))},"2")]})]})}var me=z.a.Sider,Oe=z.a.Content;function xe(e){var t=e.dispatch,n=e.state;n.city;return Object(r.jsxs)(z.a,{children:[Object(r.jsx)(me,{theme:"light",style:{overflow:"auto",height:"100vh",position:"fixed",left:0},children:Object(r.jsx)(K,{dispatch:t})}),Object(r.jsx)(z.a,{style:{marginLeft:200,height:"100vh"},children:Object(r.jsx)(Oe,{style:{background:"white",padding:10,margin:"24px 16px 0",overflow:"initial"},children:Se(t,n)})})]})}function Se(e,t){switch(t.city.selectedItem){case"Overview":return Object(r.jsx)(B,{dispatch:e,state:t});case"Guild":return Object(r.jsx)(ge,{dispatch:e,state:t});case"Market":return Object(r.jsx)(fe,{dispatch:e,state:t});case"Tavern":return Object(r.jsx)(ye,{dispatch:e,state:t});default:return"No content"}}var we=0;function ke(){return Math.random()>.5?"warrior":"mage"}function Ie(){return{health:C(8,10),strength:C(1,3),willpower:C(1,3),endurance:C(1,3),agility:C(1,3)}}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"name",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ke(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ie(),s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{missions:0,daysInGuild:0};return{id:we++,name:e,color:t,items:[],gold:0,exp:0,level:1,type:n,task:null,stats:r,computedStats:r,data:s}}function Te(){var e=o.a.useNotification(),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(s.useReducer)(D,{guild:{stats:{name:"Tainor",gold:0,members:[Ne("Hoijof","indigo")],items:[]},selectedItem:"Overview"},city:{selectedItem:"Overview"},tavern:{recruits:[1,2,3,4].map((function(){return Ne()}))},quests:{quests:[H(),H(),H(),H(),H()],stats:{questsCreated:0,questStarted:0,questsCompleted:0}},selectedCity:"City",day:0,stageSpeed:500,stageProgress:0,isPaused:!1,notify:n,ticker:G.initialize()}),h=Object(i.a)(c,2),j=h[0],g=h[1];return function(e,t){var n=Object(s.useRef)();Object(s.useEffect)((function(){n.current=e}),[e]),Object(s.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){j.ticker.tick(g,j)}),j.stageSpeed),Object(u.a)("space",(function(){return g("switchPause")})),Object(u.a)("+",{splitKey:"-"},(function(e){console.log("you pressed +")})),Object(u.a)("*",(function(e){"+"===e.key&&g({type:"changeStageSpeed",payload:-25}),"-"===e.key&&g({type:"changeStageSpeed",payload:25})})),Object(r.jsxs)(r.Fragment,{children:[a,Ee(g,j),Object(r.jsxs)("div",{id:"TickerBar",style:{position:"absolute",left:0,bottom:0,width:"100%"},children:[Object(r.jsxs)("div",{children:[j.ticker.day," / ",M[j.ticker.month]," / ",j.ticker.year]}),Object(r.jsxs)("div",{children:["Hour: ",j.ticker.hour,":00"]}),Object(r.jsxs)("div",{children:["Time of The Day: ",j.ticker.currentStage]}),Object(r.jsx)(d.a,{onClick:function(){g("switchPause")},children:j.isPaused?"Resume":"Pause"}),Object(r.jsx)("br",{}),Object(r.jsx)(d.a,{onClick:function(){g({type:"changeStageSpeed",payload:10})},children:"-"}),Object(r.jsxs)("span",{children:[" Speed: ",j.stageSpeed," "]}),Object(r.jsx)(d.a,{onClick:function(){g({type:"changeStageSpeed",payload:-10})},children:"+"}),Object(r.jsx)(l.a,{percent:j.stageProgress,showInfo:!1,size:"small"})]})]})}function Ee(e,t){switch(t.selectedCity){case"City":return Object(r.jsx)(xe,{dispatch:e,state:t});default:return"No city to render"}}var Me=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(Te,{})})},Ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,229)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};c.a.render(Object(r.jsx)(Me,{}),document.getElementById("root")),Ge()}},[[215,1,2]]]);
//# sourceMappingURL=main.ff3c12b5.chunk.js.map