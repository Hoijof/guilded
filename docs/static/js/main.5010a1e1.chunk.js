(this.webpackJsonpguilded=this.webpackJsonpguilded||[]).push([[0],{143:function(e,t,n){},216:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n(0),c=n.n(a),s=n(27),i=n.n(s),l=(n(143),n(144),n(96)),d=n(137),o=n(227),u=n(225),j=n(90),h=n(60);function g(e){return e.ticker}function b(e){return e.guild.selectedItem}function O(e,t){var n=g(t);if(n.currentStage===y.NIGHT)return p(e,t);n.currentStage=function(e){switch(e){case y.MORNING:return y.AFTERNOON;case y.AFTERNOON:return y.EVENING;case y.EVENING:return y.NIGHT}}(n.currentStage)}function p(e,t){var n=g(t);n.currentStage=y.MORNING,n.hour=0,n.day++,e("switchPause",!0)}function v(e){var t;return t={},Object(h.a)(t,y.MORNING,[]),Object(h.a)(t,y.AFTERNOON,[]),Object(h.a)(t,y.EVENING,[]),Object(h.a)(t,y.NIGHT,[]),t}function f(e,t){if(!t.isPaused)return 6===t.stageProgress&&(t.ticker.advanceStage(e,t),e("resetStageProgress")),g(t).stats.ticks++,g(t).hour++,e("increaseStageProgress")}var y={MORNING:"Morning",AFTERNOON:"Afternoon",EVENING:"Evening",NIGHT:"Night"},m={initialize:function(){return{currentStage:y.MORNING,hour:0,day:1,todayEvents:v({}),activeEvents:[],stats:{totalEvents:0,ticks:0},callADay:p,advanceStage:O,tick:f}}};var x=n(43),S=n.n(x);function k(e,t){var n="string"===typeof t?{type:t}:t;switch(["increaseStageProgress","resetStageProgress"].includes(n.type)||console.log(n),n.type){case"changeSelectedMenu":return S()(e,{selectedItem:{$set:n.payload}});case"increaseStageProgress":return S()(e,{stageProgress:{$set:e.stageProgress+1}});case"resetStageProgress":return S()(e,{stageProgress:{$set:0}});case"switchPause":return S()(e,{isPaused:{$set:!e.isPaused}});case"changeStageSpeed":return S()(e,{stageSpeed:{$set:e.stageSpeed+n.payload}})}switch(n.type){case"changeSelectedGuildMenu":return S()(e,{guild:{selectedItem:{$set:n.payload}}});case"askFounding":return S()(e,{guild:{stats:{gold:{$set:25}}}});case"addGoldToMember":var r=e.guild.stats.members.indexOf(n.payload),a=S()(n.payload,{gold:{$set:n.payload.gold+5}});return S()(e,{guild:{stats:{members:{$splice:[[r,1,a]]},gold:{$set:e.guild.stats.gold-5}}}});case"hireGuildMember":return S()(e,{guild:{stats:{members:{$push:[n.payload]},gold:{$set:e.guild.stats.gold-5*n.payload.level}}},tavern:{recruits:{$splice:[[e.tavern.recruits.indexOf(n.payload),1]]}}})}switch(n.type){case"changeSelectedCityMenu":return S()(e,{city:{selectedItem:{$set:n.payload}}})}return console.log("returning Default"),e}var w=n(221),I=n(228);function N(e){var t=e.dispatch;return Object(r.jsxs)(I.a,{className:"CityMenu",onSelect:function(e){var n=e.key;t({type:"changeSelectedCityMenu",payload:n})},theme:"light",mode:"inline",defaultSelectedKeys:["Overview"],children:[Object(r.jsx)(I.a.Item,{children:"Overview"},"Overview"),Object(r.jsx)(I.a.Item,{children:"Guild"},"Guild"),Object(r.jsx)(I.a.Item,{children:"Market"},"Market"),Object(r.jsx)(I.a.Item,{children:"Tavern"},"Tavern")]})}function M(e){e.dispatch,e.state;return"overview"}function T(e){var t=e.dispatch,n=e.defaultItem;return Object(r.jsxs)(I.a,{onSelect:function(e){var n=e.key;t({type:"changeSelectedGuildMenu",payload:n})},theme:"light",mode:"horizontal",defaultSelectedKeys:[n],children:[Object(r.jsx)(I.a.Item,{children:"Overview"},"Overview"),Object(r.jsx)(I.a.Item,{children:"Members"},"Members")]})}var P=n(111),G=n(218),E=n(223);function C(e){var t=[{name:"name",value:e.name},{name:"gold",value:e.gold},{name:"members",value:e.members.length}];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(G.a,{orientation:"left",children:"Stats"}),Object(r.jsx)(E.b,{size:"small",bordered:!0,dataSource:t,renderItem:function(e){return Object(r.jsxs)(E.b.Item,{children:[e.name,": ",e.value]})}})]})}function F(e){var t=e.dispatch,n=e.state,a=n.guild.stats,c=a.gold,s=a.members;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(C,Object(P.a)({},n.guild.stats)),Object(r.jsx)("br",{}),0===c&&1===s.length?Object(r.jsx)(o.a,{type:"primary",onClick:function(){t({type:"askFounding"})},children:"Ask for founding to the city council"}):null]})}var $=n(224),R=n(226),A=n(222),H=n(229);function L(e,t){return t>e?"success":t<e?"danger":"default"}function z(e){return Object.keys(e.stats).map((function(t){var n=e.stats[t],a=e.computedStats[t];return Object(r.jsxs)($.a.Text,{type:L(n,a),children:[t,": ",a]},t)}))}function D(e){return Object.keys(e.stats).reduce((function(t,n){return t+e.stats[n]}),0)-e.stats.health}function V(e){return Object.keys(e.data).map((function(t){var n=e.data[t];return Object(r.jsxs)($.a.Text,{children:[t,": ",n]},t)}))}var B={width:200,float:"left",margin:5},K=$.a.Text,J=R.a.Panel;function W(e){var t=e.dispatch,n=e.state;return Object(r.jsx)(r.Fragment,{children:n.guild.stats.members.map((function(e,n){return Object(r.jsx)(A.a,{style:B,title:e.name,extra:Object(r.jsx)("div",{style:{width:15,height:15,background:e.color}}),children:Object(r.jsxs)(H.b,{style:{width:"100%"},direction:"vertical",children:[Object(r.jsxs)(K,{children:["Gold: ",e.gold," ",Object(r.jsx)(K,{style:{fontSize:18,cursor:"pointer"},onClick:function(){t({type:"addGoldToMember",payload:e})},children:"+"})]}),Object(r.jsxs)(K,{children:["Level: ",e.level," (",e.exp," / ",2*e.level,") ",e.exp>2*e.level?"\u25b2":null]}),Object(r.jsxs)(K,{children:["Type: ",e.type]}),Object(r.jsxs)(K,{children:["Task: ",e.task?e.task:"None"]}),Object(r.jsx)(R.a,{ghost:!0,style:{marginLeft:-15},children:Object(r.jsx)(J,{header:"Stats (".concat(D(e),")"),children:Object(r.jsx)(H.b,{style:{width:"100%"},direction:"vertical",children:z(e)})},"1")}),Object(r.jsx)(R.a,{ghost:!0,style:{marginLeft:-15},children:Object(r.jsx)(J,{header:"Data",children:Object(r.jsx)(H.b,{style:{width:"100%"},direction:"vertical",children:V(e)})},"2")})]})},n)}))})}var Y=w.a.Header,q=w.a.Content;function Q(e,t){switch(t.guild.selectedItem){case"Overview":return Object(r.jsx)(F,{dispatch:e,state:t});case"Members":return Object(r.jsx)(W,{dispatch:e,state:t});case"Market":return Object(r.jsx)(F,{dispatch:e,state:t});default:return"error"}}function U(e){var t=e.dispatch,n=e.state;return Object(r.jsxs)(w.a,{style:{background:"white"},children:[Object(r.jsx)(Y,{theme:"light",style:{background:"white",padding:0},children:Object(r.jsx)(T,{dispatch:t,defaultItem:b(n)})}),Object(r.jsx)(q,{style:{background:"white",padding:10,margin:"24px 16px 0",overflow:"initial"},children:Q(t,n)})]})}function X(){return"hola"}var Z=$.a.Title,_=$.a.Text,ee=R.a.Panel;function te(e){var t=e.dispatch,n=e.state;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(_,{children:"Welcome to the Tavern, please take a seat!"}),Object(r.jsx)(Z,{level:4,children:"Available Recruits"}),n.tavern.recruits.map((function(e,a){var c=5*e.level,s=n.guild.stats.gold>=c;return Object(r.jsx)(A.a,{style:B,title:e.name,extra:Object(r.jsx)("div",{style:{width:15,height:15,background:e.color}}),children:Object(r.jsxs)(H.b,{style:{width:"100%"},direction:"vertical",children:[Object(r.jsxs)(_,{children:["Level: ",e.level," (",e.exp," / ",2*e.level,") ",e.exp>2*e.level?"\u25b2":null]}),Object(r.jsxs)(_,{children:["Type: ",e.type]}),Object(r.jsx)(R.a,{ghost:!0,style:{marginLeft:-15},children:Object(r.jsx)(ee,{header:"Stats (".concat(D(e),")"),children:Object(r.jsx)(H.b,{style:{width:"100%"},direction:"vertical",children:z(e)})},"1")}),Object(r.jsxs)(o.a,{type:"primary",disabled:!s,onClick:function(){t({type:"hireGuildMember",payload:e}),n.notify.info({message:"You just hired ".concat(e.name," for ").concat(c," gold coins")})},children:["Hire for ",c," gold coins"]})]})},a)}))]})}var ne=w.a.Sider,re=w.a.Content;function ae(e){var t=e.dispatch,n=e.state;n.city;return Object(r.jsxs)(w.a,{children:[Object(r.jsx)(ne,{theme:"light",style:{overflow:"auto",height:"100vh",position:"fixed",left:0},children:Object(r.jsx)(N,{dispatch:t})}),Object(r.jsx)(w.a,{style:{marginLeft:200,height:"100vh"},children:Object(r.jsx)(re,{style:{background:"white",padding:10,margin:"24px 16px 0",overflow:"initial"},children:ce(t,n)})})]})}function ce(e,t){switch(t.city.selectedItem){case"Overview":return Object(r.jsx)(M,{dispatch:e,state:t});case"Guild":return Object(r.jsx)(U,{dispatch:e,state:t});case"Market":return Object(r.jsx)(X,{dispatch:e,state:t});case"Tavern":return Object(r.jsx)(te,{dispatch:e,state:t});default:return"No content"}}function se(e,t){return Math.round(Math.random()*(t-e)+e)}function ie(){return"#".concat(Math.floor(16777215*Math.random()).toString(16))}var le=0;function de(){return Math.random()>.5?"warrior":"mage"}function oe(){return{health:se(8,10),strength:se(1,3),willpower:se(1,3),endurance:se(1,3),agility:se(1,3)}}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"name",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:de(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:oe(),a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{missions:0,daysInGuild:0};return{id:le++,name:e,color:t,items:[],gold:0,exp:0,level:1,type:n,task:null,stats:r,computedStats:r,data:a}}function je(){var e=d.a.useNotification(),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(a.useReducer)(k,{guild:{stats:{name:"Tainor",gold:0,members:[ue("Hoijof","indigo")],items:[]},selectedItem:"Overview"},city:{selectedItem:"Overview"},tavern:{recruits:[1,2,3,4,5,6,7,8,9,10].map((function(){return ue()}))},selectedCity:"City",day:0,stageSpeed:500,stageProgress:0,isPaused:!1,notify:n,ticker:m.initialize()}),i=Object(l.a)(s,2),h=i[0],g=i[1];return function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){h.ticker.tick(g,h)}),h.stageSpeed),Object(j.a)("space",(function(){return g("switchPause")})),Object(j.a)("+",{splitKey:"-"},(function(e){console.log("you pressed +")})),Object(j.a)("*",(function(e){"+"===e.key&&g({type:"changeStageSpeed",payload:-25}),"-"===e.key&&g({type:"changeStageSpeed",payload:25})})),Object(r.jsxs)(r.Fragment,{children:[c,he(g,h),Object(r.jsxs)("div",{id:"TickerBar",style:{position:"absolute",left:0,bottom:0,width:"100%"},children:[Object(r.jsxs)("div",{children:[" Day: ",h.ticker.day]}),Object(r.jsxs)("div",{children:["Hour: ",h.ticker.hour,":00"]}),Object(r.jsxs)("div",{children:["Time of The Day: ",h.ticker.currentStage]}),Object(r.jsx)(o.a,{onClick:function(){g("switchPause")},children:h.isPaused?"Resume":"Pause"}),Object(r.jsx)("br",{}),Object(r.jsx)(o.a,{onClick:function(){g({type:"changeStageSpeed",payload:10})},children:"-"}),Object(r.jsxs)("span",{children:[" Speed: ",h.stageSpeed," "]}),Object(r.jsx)(o.a,{onClick:function(){g({type:"changeStageSpeed",payload:-10})},children:"+"}),Object(r.jsx)(u.a,{percent:h.stageProgress,showInfo:!1,size:"small"})]})]})}function he(e,t){switch(t.selectedCity){case"City":return Object(r.jsx)(ae,{dispatch:e,state:t});default:return"No city to render"}}var ge=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(je,{})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,230)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(ge,{})}),document.getElementById("root")),be()}},[[216,1,2]]]);
//# sourceMappingURL=main.5010a1e1.chunk.js.map